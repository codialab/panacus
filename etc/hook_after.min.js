(()=>{"use strict";const t=Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'));t.forEach(t=>{new bootstrap.Tooltip(t)})})();function Legend(e,{given_svg:t,title:a,tickSize:n=6,width:r=320,height:o=44+n,marginTop:l=18,marginRight:i=0,marginBottom:d=16+n,marginLeft:s=0,ticks:c=r/64,tickFormat:g,tickValues:u}={}){function m(e,a=256){const t=document.createElement("canvas");t.width=a;t.height=1;const n=t.getContext("2d");for(let t=0;t<a;++t){n.fillStyle=e(t/(a-1));n.fillRect(t,0,1,1)}return t}const p=t.attr("width",r).attr("height",o).attr("viewBox",[0,0,r,o]).style("overflow","visible").style("display","block");let f=t=>t.selectAll(".tick line").attr("y1",l+d-o);let h;if(e.interpolate){const b=Math.min(e.domain().length,e.range().length);h=e.copy().rangeRound(d3.quantize(d3.interpolate(s,r-i),b));p.append("image").attr("x",s).attr("y",l).attr("width",r-s-i).attr("height",o-l-d).attr("preserveAspectRatio","none").attr("xlink:href",m(e.copy().domain(d3.quantize(d3.interpolate(0,1),b))).toDataURL())}else if(e.interpolator){h=Object.assign(e.copy().interpolator(d3.interpolateRound(s,r-i)),{range(){return[s,r-i]}});p.append("image").attr("x",s).attr("y",l).attr("width",r-s-i).attr("height",o-l-d).attr("preserveAspectRatio","none").attr("xlink:href",m(e.interpolator()).toDataURL());if(!h.ticks){if(u===undefined){const b=Math.round(c+1);u=d3.range(b).map(t=>d3.quantile(e.domain(),t/(b-1)))}if(typeof g!=="function"){g=d3.format(g===undefined?",f":g)}}}else if(e.invertExtent){const x=e.thresholds?e.thresholds():e.quantiles?e.quantiles():e.domain();const y=g===undefined?t=>t:typeof g==="string"?d3.format(g):g;h=d3.scaleLinear().domain([-1,e.range().length-1]).rangeRound([s,r-i]);p.append("g").selectAll("rect").data(e.range()).join("rect").attr("x",(t,e)=>h(e-1)).attr("y",l).attr("width",(t,e)=>h(e)-h(e-1)).attr("height",o-l-d).attr("fill",t=>t);u=d3.range(x.length);g=t=>y(x[t],t)}else{h=d3.scaleBand().domain(e.domain()).rangeRound([s,r-i]);p.append("g").selectAll("rect").data(e.domain()).join("rect").attr("x",h).attr("y",l).attr("width",Math.max(0,h.bandwidth()-1)).attr("height",o-l-d).attr("fill",e);f=()=>{}}p.append("g").attr("transform",`translate(0,${o-d})`).call(d3.axisBottom(h).ticks(c,typeof g==="string"?g:undefined).tickFormat(typeof g==="function"?g:undefined).tickSize(n).tickValues(u)).call(f).call(t=>t.select(".domain").remove()).call(t=>t.append("text").attr("x",s).attr("y",l+d-o-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(a));return p.node()}const pluginCanvasBackgroundColor={id:"customCanvasBackgroundColor",beforeDraw:(t,e,a)=>{const{ctx:n,chartArea:{top:r,bottom:o,left:l,right:i,width:d,height:s},scales:{x:c,y:g}}=t;n.save();n.globalCompositeOperation="destination-over";n.fillStyle=a.color||"#99ffff";n.fillRect(l,r,d,s);n.restore()}};for(let t in objects.datasets){let e=objects.datasets[t];if(e instanceof Bar){let t=e;var ctx=document.getElementById("chart-bar-"+t.id);var myChart=new Chart(ctx,{type:"bar",data:{labels:t.labels,datasets:[{label:t.name,data:t.values,borderWidth:1,backgroundColor:PCOLORS[0],borderColor:"#FFFFFF"}]},options:{scales:{y:{title:{display:true,text:t.y_label},beginAtZero:true,grid:{color:"#FFFFFF"}},x:{title:{display:true,text:t.x_label},grid:{color:"#FFFFFF"},ticks:{maxRotation:90,minRotation:65}}},plugins:{customCanvasBackgroundColor:{color:"#E5E4EE"}}},plugins:[pluginCanvasBackgroundColor]});buildPlotDownload(myChart,t.id,fname);if(t.log_toggle){buildLogToggle(myChart,"bar-"+t.id)}}else if(e instanceof MultiBar){let a=e;var ctx=document.getElementById("chart-bar-"+a.id);var myChart=new Chart(ctx,{type:"bar",data:{labels:a.labels,datasets:Array.from(a.values.entries()).reverse().map(function([t,e]){return{label:a.names[t],data:e,borderWidth:1,backgroundColor:PCOLORS[t%PCOLORS.length],borderColor:"#FFFFFF"}})},options:{scales:{y:{title:{display:true,text:a.y_label},beginAtZero:true,grid:{color:"#FFFFFF"},stacked:false},x:{title:{display:true,text:a.x_label},grid:{color:"#FFFFFF"},ticks:{maxRotation:90,minRotation:65},stacked:true}},plugins:{customCanvasBackgroundColor:{color:"#E5E4EE"}}},plugins:[pluginCanvasBackgroundColor]});buildPlotDownload(myChart,a.id,fname);if(a.log_toggle){buildLogToggle(myChart,"bar-"+a.id)}}else if(e instanceof Hexbin){let t=e;var ctx=document.getElementById("chart-hexbin-"+t.id);buildPlotDownload(myChart,t.id,fname);const width=928;const height=width;const radius=20;const marginTop=20;const marginRight=20;const marginBottom=30+radius;const marginLeft=40+radius;const x=d3.scaleLinear().domain(d3.extent(t.bins,t=>t["x"])).range([marginLeft,width-marginRight]);const y=d3.scaleLinear().domain(d3.extent(t.bins,t=>t["y"])).rangeRound([height-marginBottom,marginTop]);const hexbin=d3.hexbin().x(t=>x(t["x"])).y(t=>y(t["y"])).radius(radius*width/928).extent([[marginLeft,marginTop],[width-marginRight,height-marginBottom]]);const bins=hexbin(t.bins);console.log(bins.length);const color=d3.scaleSequential(d3.interpolateBuPu).domain([0,d3.max(bins,t=>t.length)/2]);const svg=d3.create("svg").attr("viewBox",[0,0,width,height]);svg.append("g").attr("fill","#ddd").attr("stroke","black").selectAll("path").data(bins).enter().append("path").attr("transform",t=>`translate(${t.x},${t.y})`).attr("d",hexbin.hexagon()).attr("fill",t=>color(t.length));svg.append("g").attr("transform",`translate(0,${height-marginBottom+radius})`).call(d3.axisBottom(x).ticks(width/80,"")).call(t=>t.select(".domain").remove()).call(t=>t.append("text").attr("x",width-marginRight).attr("y",-6).attr("fill","currentColor").attr("font-weight","bold").attr("text-anchor","end").text("Coverage"));svg.append("g").attr("transform",`translate(${marginLeft-radius},0)`).call(d3.axisLeft(y).ticks(null,".1s")).call(t=>t.select(".domain").remove()).call(t=>t.append("text").attr("x",0-radius-20).attr("y",marginTop).attr("dy",".71em").attr("fill","currentColor").attr("font-weight","bold").attr("text-anchor","start").text("Length"));var inner_svg=svg.append("svg").attr("transform",`translate(${width-350},0)`);Legend(color,{given_svg:inner_svg});ctx.append(svg.node())}}for(let e in objects.tables){let t=objects.tables[e];buildTableDownload(t,e,e+"_"+fname)}
