(()=>{"use strict";const t=Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'));t.forEach(t=>{new bootstrap.Tooltip(t)})})();const pluginCanvasBackgroundColor={id:"customCanvasBackgroundColor",beforeDraw:(t,a,e)=>{const{ctx:l,chartArea:{top:o,bottom:r,left:n,right:s,width:i,height:d},scales:{x:c,y:g}}=t;l.save();l.globalCompositeOperation="destination-over";l.fillStyle=e.color||"#99ffff";l.fillRect(n,o,i,d);l.restore()}};for(let t in objects.datasets){let a=objects.datasets[t];if(a instanceof Bar){let t=a;var ctx=document.getElementById("chart-bar-"+t.id);var myChart=new Chart(ctx,{type:"bar",data:{labels:t.labels,datasets:[{label:t.name,data:t.values,borderWidth:1,backgroundColor:PCOLORS[0],borderColor:"#FFFFFF"}]},options:{scales:{y:{title:{display:true,text:t.y_label},beginAtZero:true,grid:{color:"#FFFFFF"}},x:{title:{display:true,text:t.x_label},grid:{color:"#FFFFFF"},ticks:{maxRotation:90,minRotation:65}}},plugins:{customCanvasBackgroundColor:{color:"#E5E4EE"}}},plugins:[pluginCanvasBackgroundColor]});buildPlotDownload(myChart,t.id,fname);if(t.log_toggle){buildLogToggle(myChart,"bar-"+t.id)}}else if(a instanceof MultiBar){let e=a;var ctx=document.getElementById("chart-bar-"+e.id);var myChart=new Chart(ctx,{type:"bar",data:{labels:e.labels,datasets:Array.from(e.values.entries()).reverse().map(function([t,a]){return{label:e.names[t],data:a,borderWidth:1,backgroundColor:PCOLORS[t%PCOLORS.length],borderColor:"#FFFFFF"}})},options:{scales:{y:{title:{display:true,text:e.y_label},beginAtZero:true,grid:{color:"#FFFFFF"},stacked:false},x:{title:{display:true,text:e.x_label},grid:{color:"#FFFFFF"},ticks:{maxRotation:90,minRotation:65},stacked:true}},plugins:{customCanvasBackgroundColor:{color:"#E5E4EE"}}},plugins:[pluginCanvasBackgroundColor]});buildPlotDownload(myChart,e.id,fname);if(e.log_toggle){buildLogToggle(myChart,"bar-"+e.id)}}else if(a instanceof Hexbin){console.time("hex");let t=a;var ctx=document.getElementById("chart-hexbin-"+t.id);buildPlotDownload(myChart,t.id,fname);const width=928;const height=width;const radius=t.radius;const marginTop=20;const marginRight=20;const marginBottom=30+radius;const marginLeft=60+radius;const x=d3.scaleLinear().domain([t.min[0],t.max[0]]).range([marginLeft,width-marginRight]);const y=d3.scaleLinear().domain([t.min[1],t.max[1]]).rangeRound([height-marginBottom,marginTop]);const hexbin=d3.hexbin().x(t=>x(t["x"])).y(t=>y(t["y"])).radius(radius*width/928).extent([[marginLeft,marginTop],[width-marginRight,height-marginBottom]]);const bins=t.bins;const mbin=Math.max(...bins.map(t=>t.length));console.log(mbin);const color=d3.scaleSequential(d3.interpolateBuPu).domain([0,d3.max(bins,t=>t.length)]);const svg=d3.create("svg").attr("viewBox",[0,0,width,height]);svg.append("g").attr("fill","#ddd").attr("stroke","black").selectAll("path").data(bins).enter().append("path").attr("transform",t=>`translate(${t.x},${t.y})`).attr("d",hexbin.hexagon()).attr("fill",t=>color(t.length));svg.append("g").attr("transform",`translate(0,${height-marginBottom+radius})`).call(d3.axisBottom(x).ticks(width/80,"")).call(t=>t.append("text").attr("x",width).attr("y",28).attr("fill","currentColor").attr("font-weight","bold").attr("text-anchor","end").text("Coverage"));svg.append("g").attr("transform",`translate(${marginLeft-radius-9},0)`).call(d3.axisLeft(y).ticks(null,".1s").tickFormat((t,a)=>d3.format(".1e")(Math.pow(10,t)))).call(t=>t.append("text").attr("x",0-radius-10).attr("y",0).attr("dy",".71em").attr("fill","currentColor").attr("font-weight","bold").attr("text-anchor","start").text("Length"));var inner_svg=svg.append("svg").attr("transform",`translate(${width-350},0)`);Legend(color,{given_svg:inner_svg,tickFormat:t=>Math.pow(10,t)});ctx.append(svg.node());console.timeEnd("hex")}else if(a instanceof Heatmap){let l=a;var ctx=document.getElementById("chart-heatmap-"+l.id);const data_points=l.values.map(function(t,e){return t.map(function(t,a){return{x:e,y:a,v:t,x_label:l.x_labels[e],y_label:l.y_labels[a]}})}).flat();const data={datasets:[{label:"My Matrix",data:data_points,backgroundColor(t){const a=t.dataset.data[t.dataIndex].v;return getColor(a,0)},width:({chart:t})=>(t.chartArea||{}).width/l.x_labels.length,height:({chart:t})=>(t.chartArea||{}).height/l.y_labels.length}]};var myChart=new Chart(ctx,{type:"matrix",data:data,options:{aspectRatio:1,plugins:{legend:false,tooltip:{callbacks:{title(){return""},label(t){const a=t.dataset.data[t.dataIndex];return[a.x_label+" - ",a.y_label+":",a.v]}}},customCanvasBackgroundColor:{color:"#E5E4EE"}},scales:{x:{ticks:{stepSize:1,callback:(t,a)=>{return l.x_labels[t]}},grid:{display:false},position:"top"},y:{offset:true,ticks:{stepSize:1,callback:(t,a)=>{return l.y_labels[t]}},grid:{display:false}}}},plugins:[pluginCanvasBackgroundColor]});buildPlotDownload(myChart,l.id,fname);buildColorSlider(myChart,l.id)}}for(let a in objects.tables){let t=objects.tables[a];buildTableDownload(t,a,a+"_"+fname)}
