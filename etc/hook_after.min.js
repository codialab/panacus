(()=>{"use strict";const t=Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'));t.forEach(t=>{new bootstrap.Tooltip(t)})})();console.time("hook");function Legend(e,{given_svg:t,title:a,tickSize:o=6,width:n=320,height:r=44+o,marginTop:l=18,marginRight:i=0,marginBottom:d=16+o,marginLeft:s=0,ticks:c=n/64,tickFormat:g,tickValues:m}={}){function u(e,a=256){const t=document.createElement("canvas");t.width=a;t.height=1;const o=t.getContext("2d");for(let t=0;t<a;++t){o.fillStyle=e(t/(a-1));o.fillRect(t,0,1,1)}return t}const h=t.attr("width",n).attr("height",r).attr("viewBox",[0,0,n,r]).style("overflow","visible").style("display","block");let p=t=>t.selectAll(".tick line").attr("y1",l+d-r);let f;if(e.interpolate){const x=Math.min(e.domain().length,e.range().length);f=e.copy().rangeRound(d3.quantize(d3.interpolate(s,n-i),x));h.append("image").attr("x",s).attr("y",l).attr("width",n-s-i).attr("height",r-l-d).attr("preserveAspectRatio","none").attr("xlink:href",u(e.copy().domain(d3.quantize(d3.interpolate(0,1),x))).toDataURL())}else if(e.interpolator){f=Object.assign(e.copy().interpolator(d3.interpolateRound(s,n-i)),{range(){return[s,n-i]}});h.append("image").attr("x",s).attr("y",l).attr("width",n-s-i).attr("height",r-l-d).attr("preserveAspectRatio","none").attr("xlink:href",u(e.interpolator()).toDataURL());if(!f.ticks){if(m===undefined){const x=Math.round(c+1);m=d3.range(x).map(t=>d3.quantile(e.domain(),t/(x-1)))}if(typeof g!=="function"){g=d3.format(g===undefined?",f":g)}}}else if(e.invertExtent){const b=e.thresholds?e.thresholds():e.quantiles?e.quantiles():e.domain();const y=g===undefined?t=>t:typeof g==="string"?d3.format(g):g;f=d3.scaleLinear().domain([-1,e.range().length-1]).rangeRound([s,n-i]);h.append("g").selectAll("rect").data(e.range()).join("rect").attr("x",(t,e)=>f(e-1)).attr("y",l).attr("width",(t,e)=>f(e)-f(e-1)).attr("height",r-l-d).attr("fill",t=>t);m=d3.range(b.length);g=t=>y(b[t],t)}else{f=d3.scaleBand().domain(e.domain()).rangeRound([s,n-i]);h.append("g").selectAll("rect").data(e.domain()).join("rect").attr("x",f).attr("y",l).attr("width",Math.max(0,f.bandwidth()-1)).attr("height",r-l-d).attr("fill",e);p=()=>{}}h.append("g").attr("transform",`translate(0,${r-d})`).call(d3.axisBottom(f).ticks(c,typeof g==="string"?g:undefined).tickFormat(typeof g==="function"?g:undefined).tickSize(o).tickValues(m)).call(p).call(t=>t.select(".domain").remove()).call(t=>t.append("text").attr("x",s).attr("y",l+d-r-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(a));return h.node()}const pluginCanvasBackgroundColor={id:"customCanvasBackgroundColor",beforeDraw:(t,e,a)=>{const{ctx:o,chartArea:{top:n,bottom:r,left:l,right:i,width:d,height:s},scales:{x:c,y:g}}=t;o.save();o.globalCompositeOperation="destination-over";o.fillStyle=a.color||"#99ffff";o.fillRect(l,n,d,s);o.restore()}};for(let t in objects.datasets){let e=objects.datasets[t];if(e instanceof Bar){let t=e;var ctx=document.getElementById("chart-bar-"+t.id);var myChart=new Chart(ctx,{type:"bar",data:{labels:t.labels,datasets:[{label:t.name,data:t.values,borderWidth:1,backgroundColor:PCOLORS[0],borderColor:"#FFFFFF"}]},options:{scales:{y:{title:{display:true,text:t.y_label},beginAtZero:true,grid:{color:"#FFFFFF"}},x:{title:{display:true,text:t.x_label},grid:{color:"#FFFFFF"},ticks:{maxRotation:90,minRotation:65}}},plugins:{customCanvasBackgroundColor:{color:"#E5E4EE"}}},plugins:[pluginCanvasBackgroundColor]});buildPlotDownload(myChart,t.id,fname);if(t.log_toggle){buildLogToggle(myChart,"bar-"+t.id)}}else if(e instanceof MultiBar){let a=e;var ctx=document.getElementById("chart-bar-"+a.id);var myChart=new Chart(ctx,{type:"bar",data:{labels:a.labels,datasets:Array.from(a.values.entries()).reverse().map(function([t,e]){return{label:a.names[t],data:e,borderWidth:1,backgroundColor:PCOLORS[t%PCOLORS.length],borderColor:"#FFFFFF"}})},options:{scales:{y:{title:{display:true,text:a.y_label},beginAtZero:true,grid:{color:"#FFFFFF"},stacked:false},x:{title:{display:true,text:a.x_label},grid:{color:"#FFFFFF"},ticks:{maxRotation:90,minRotation:65},stacked:true}},plugins:{customCanvasBackgroundColor:{color:"#E5E4EE"}}},plugins:[pluginCanvasBackgroundColor]});buildPlotDownload(myChart,a.id,fname);if(a.log_toggle){buildLogToggle(myChart,"bar-"+a.id)}}else if(e instanceof Hexbin){console.time("hex");let t=e;var ctx=document.getElementById("chart-hexbin-"+t.id);buildPlotDownload(myChart,t.id,fname);const width=928;const height=width;const radius=t.radius;const marginTop=20;const marginRight=20;const marginBottom=30+radius;const marginLeft=40+radius;const x=d3.scaleLinear().domain([t.min[0],t.max[0]]).range([marginLeft,width-marginRight]);const y=d3.scaleLinear().domain([t.min[1],t.max[1]]).rangeRound([height-marginBottom,marginTop]);const hexbin=d3.hexbin().x(t=>x(t["x"])).y(t=>y(t["y"])).radius(radius*width/928).extent([[marginLeft,marginTop],[width-marginRight,height-marginBottom]]);const bins=t.bins;const color=d3.scaleSequential(d3.interpolateBuPu).domain([0,d3.max(bins,t=>t.length)/2]);const svg=d3.create("svg").attr("viewBox",[0,0,width,height]);svg.append("g").attr("fill","#ddd").attr("stroke","black").selectAll("path").data(bins).enter().append("path").attr("transform",t=>`translate(${t.x},${t.y})`).attr("d",hexbin.hexagon()).attr("fill",t=>color(t.length));svg.append("g").attr("transform",`translate(0,${height-marginBottom+radius})`).call(d3.axisBottom(x).ticks(width/80,"")).call(t=>t.select(".domain").remove()).call(t=>t.append("text").attr("x",width-marginRight).attr("y",-6).attr("fill","currentColor").attr("font-weight","bold").attr("text-anchor","end").text("Coverage"));svg.append("g").attr("transform",`translate(${marginLeft-radius},0)`).call(d3.axisLeft(y).ticks(null,".1s")).call(t=>t.select(".domain").remove()).call(t=>t.append("text").attr("x",0-radius-20).attr("y",marginTop).attr("dy",".71em").attr("fill","currentColor").attr("font-weight","bold").attr("text-anchor","start").text("Length"));var inner_svg=svg.append("svg").attr("transform",`translate(${width-350},0)`);Legend(color,{given_svg:inner_svg});ctx.append(svg.node());console.timeEnd("hex")}}for(let e in objects.tables){let t=objects.tables[e];buildTableDownload(t,e,e+"_"+fname)}console.timeEnd("hook");
